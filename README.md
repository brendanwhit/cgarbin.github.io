# Christian Garbin blog

Personal blog - published [here](https://cgarbin.github.io/).

The blog uses [Jekyll](http://jekyllrb.com/) and the [Minimal Mistakes theme](https://mmistakes.github.io/minimal-mistakes/).

Organization:

- Posts are in the `_posts` directory.
- Images are in the `images` directory.
- Static pages are in the `_pages` directory.

## Releasing new posts

1. Test the posts locally with `bundle exec jekyll serve`
   1. Open a browser window to the address shown
1. Release them with `./publish.sh`
   1. This will push the files generated by the `bundle exec..` command to the `gh-pages` branch

## Adding tags and categories pages

This method uses [the jekyll-archives plugin](https://github.com/jekyll/jekyll-archives).

The instructions below are based on the [Minimal Mistakes documentation](https://mmistakes.github.io/minimal-mistakes/docs/configuration/#archive-settings). If there is any discrepancy between the instructions and the plugin documentation, follow the plugin documentation.

Add the plugin to the `Gemfile`:

```text
group :jekyll_plugins do
  gem "jekyll-archives"
end
```

Install the plugin:

```bash
bundle install
```

Add the plugin to the `plugins` section in `_config.yml`:

```yaml
plugins:
  ...
  - jekyll-archives
```

Set the `..._archives` variables in `_config.yml` to use the plugin:

```yaml
category_archive:
  type: jekyll-archives
  path: /categories/
tag_archive:
  type: jekyll-archives
  path: /tags/
```

Uncomment (or add) the plugin configuration section in `_config.yml`:

```yaml
jekyll-archives:
  enabled:
    - categories
    - tags
  layouts:
    category: archive-taxonomy
    tag: archive-taxonomy
  permalinks:
    category: /categories/:name/
    tag: /tags/:name/
```

Copy the Minimal Mistakes tag and categories pages.

```bash
mkdir _pages
cp docs/_pages/category-archive.md _pages
cp docs/_pages/tag-archive.md _pages
```

To add a link to the tags page, modify `navigation.yml`:

```yaml
main:
  - title: 'Posts by tag'
    url: /tags/
  - title: 'About'
    url: /about/
```

## Updating Jekyll and theme

Update Jekyll

```bash
bundle update
git add Gemfile.lock
git commit -m "Update Jekyll"
```

Update Minimal Mistakes theme

```bash
cd ../minimal-mistakes
git pull --rebase

cd ../cgarbin.github.io
# Restore Reditt sharing:
#   - _buttons.scss: add Reddit color
#   - social-share.html: remove Facebook, add Reddit

git add .
git commit -m "Update Minimal Mistakes theme"
```
